generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(uuid())
  username     String   @unique
  email        String   @unique
  password     String
  rating       Int      @default(1200)
  gamesAsWhite Game[]   @relation("WhitePlayer")
  gamesAsBlack Game[]   @relation("BlackPlayer")
  createdAt    DateTime @default(now())
}

model Game {
  id             String   @id @default(uuid())
  playerWhite    User     @relation("WhitePlayer", fields: [playerWhiteId], references: [id])
  playerWhiteId  String

  playerBlack    User     @relation("BlackPlayer", fields: [playerBlackId], references: [id])
  playerBlackId  String

  result         String?  // "white", "black", "draw", or null
  ratingChange   Int?     // positive/negative rating impact for the player
  moves          Json
  type           String   // "vsAI", "multiplayer", "tournament", etc.
  duration       Int?     // game time in seconds
  createdAt      DateTime @default(now())
}
